# API: –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (quickCreate)

## –û–ø–∏—Å–∞–Ω–∏–µ
–≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

## URL
```
POST /documents
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| `document_type_id` | integer | ‚úÖ | ID —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ |
| `topic` | string | ‚úÖ | –¢–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–º–∞–∫—Å. 255 —Å–∏–º–≤–æ–ª–æ–≤) |
| `test` | boolean | ‚ùå | –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ |

## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### üü¢ –û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º (test=false –∏–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω)
–°–æ–∑–¥–∞–µ—Ç—Å—è **–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç** —Ç–æ–ª—å–∫–æ —Å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```json
{
  "document_type_id": 1,
  "topic": "–ú–æ—è —Ç–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `structure.topic` = –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è —Ç–µ–º–∞
- `structure.theses` = –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞
- `structure.objectives` = –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
- `structure.contents` = –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
- `structure.references` = –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GPT

### üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (test=true)
–°–æ–∑–¥–∞–µ—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç —Å **—Ñ–µ–π–∫–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏** –∏–∑ —Ñ–∞–±—Ä–∏–∫–∏:

```json
{
  "document_type_id": 1,
  "topic": "–ú–æ—è —Ç–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞",
  "test": true
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —Ñ–µ–π–∫–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ `DocumentFactory`
- –ì–æ—Ç–æ–≤—ã–µ —Ü–µ–ª–∏, —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ, —Å—Å—ã–ª–∫–∏
- –¢–µ–º–∞ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –ø–µ—Ä–µ–¥–∞–Ω–Ω—É—é

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ã—á–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
```bash
curl -X POST http://localhost/documents \
  -H "Content-Type: application/json" \
  -d '{
    "document_type_id": 1,
    "topic": "–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏"
  }'
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
```bash
curl -X POST http://localhost/documents \
  -H "Content-Type: application/json" \
  -d '{
    "document_type_id": 1,
    "topic": "–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏",
    "test": true
  }'
```

## –û—Ç–≤–µ—Ç API

```json
{
  "message": "–î–æ–∫—É–º–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω",
  "document": {
    "id": 123,
    "title": "–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏",
    "status": "draft",
    "structure": {
      "topic": "–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏",
      "theses": "",
      "objectives": [],
      "contents": [],
      "references": []
    },
    "created_at": "2024-01-15T10:30:00Z"
  }
}
```

## –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è

1. –î–æ–∫—É–º–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–≤–∏—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é (`StartGenerateDocument` Job)
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
3. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

## –°—Ç–∞—Ç—É—Å—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

- `draft` ‚Üí `pre_generating` ‚Üí `pre_generated` (–±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- `pre_generated` ‚Üí `full_generating` ‚Üí `full_generated` (–ø–æ–ª–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### Frontend (NewDocument.vue)
```javascript
const response = await apiClient.post(route('documents.quick-create'), {
  document_type_id: Number(form.value.document_type_id),
  topic: form.value.topic
  // test: true // –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
});

// –°—Ä–∞–∑—É –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä
router.visit(route('documents.show', response.document.id));
```

### Testing (Artisan –∫–æ–º–∞–Ω–¥—ã)
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
php artisan test:document-generation --user-id=1 --topic="–¢–µ—Å—Ç–æ–≤–∞—è —Ç–µ–º–∞"

# –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
php artisan tinker
>>> Document::factory()->minimal()->create(['title' => '–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç'])
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏

‚úÖ **–ß–∏—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ** - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö —Ñ–µ–π–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —Ç–µ—Å—Ç–æ–≤—ã–µ, –∏ –ø—Ä–æ–¥–∞–∫—à–Ω –¥–æ–∫—É–º–µ–Ω—Ç—ã  
‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—Ç–∞—Ä—Ç–∞  
‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —É–¥–æ–±–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –≥–æ—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏  