# üö™ –õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ –≤—ã—Ö–æ–¥–∞

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É –≤—ã—Ö–æ–¥–∞ –¥–ª—è "–ø—É—Å—Ç—ã—Ö" –∞–∫–∫–∞—É–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç–æ–ª—å–∫–æ —á—Ç–æ –∞–≤—Ç–æ—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## üéØ –¶–µ–ª—å

–£–±—Ä–∞—Ç—å –∫–Ω–æ–ø–∫—É –≤—ã—Ö–æ–¥–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ:
- –¢–æ–ª—å–∫–æ —á—Ç–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ù–µ –≤—ã–ø–æ–ª–Ω—è–ª–∏ –Ω–∏–∫–∞–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ
- –ù–µ –∏–º–µ—é—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏–ª–∏ –ø–ª–∞—Ç–µ–∂–µ–π

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ–∫–∞–∑–∞ –∫–Ω–æ–ø–∫–∏ –≤—ã—Ö–æ–¥–∞

–ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ **–ü–û–ö–ê–ó–´–í–ê–ï–¢–°–Ø**, –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–õ–Æ–ë–û–ï** –∏–∑ —É—Å–ª–æ–≤–∏–π:

### 1. –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ —Å–∏—Å—Ç–µ–º–µ
- ‚úÖ –ï—Å—Ç—å —Ö–æ—Ç—è –±—ã 1 –¥–æ–∫—É–º–µ–Ω—Ç
- ‚úÖ –ë–∞–ª–∞–Ω—Å –±–æ–ª—å—à–µ 0 (–±—ã–ª –ø–æ–ø–æ–ª–Ω–µ–Ω)

### 2. –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram (–µ—Å—Ç—å `telegram_auth_user_id` –≤ localStorage)
- ‚úÖ –ï—Å—Ç—å —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ localStorage (`auto_auth_token`)

### 3. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- ‚úÖ Email –ù–ï —è–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º (–Ω–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ `@auto.user`)
- ‚úÖ –ï—Å—Ç—å —Å–æ–≥–ª–∞—Å–∏–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (`privacy_consent`)
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–≤—è–∑–∞–Ω —Å Telegram (`telegram_id` –∏–ª–∏ `telegram_linked_at`)

### 4. –í—Ä–µ–º—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞
- ‚úÖ –ê–∫–∫–∞—É–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –±–æ–ª–µ–µ 1 —á–∞—Å–∞

### 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω –ù–ï –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (`person.telegram.auto_created !== true`)
- ‚úÖ –ï—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –ï—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω–∞ –≤ localStorage
- ‚úÖ –ï—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ localStorage
- ‚úÖ –í—ã–±—Ä–∞–Ω —è–∑—ã–∫, –æ—Ç–ª–∏—á–Ω—ã–π –æ—Ç —Ä—É—Å—Å–∫–æ–≥–æ
- ‚úÖ –ù–∞–π–¥–µ–Ω—ã –∫—É–∫–∏ Telegram
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—à–µ–ª —á–µ—Ä–µ–∑ Telegram WebApp (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ URL)

## ‚ùå –ö—Ä–∏—Ç–µ—Ä–∏–∏ —Å–æ–∫—Ä—ã—Ç–∏—è –∫–Ω–æ–ø–∫–∏

–ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ **–°–ö–†–´–í–ê–ï–¢–°–Ø** —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- –ù–û **–ù–ò –û–î–ò–ù** –∏–∑ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –ø–æ–∫–∞–∑–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∞–∫–∫–∞—É–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è "–ø—É—Å—Ç—ã–º":
- Email –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (`@auto.user`)
- –ù–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ë–∞–ª–∞–Ω—Å —Ä–∞–≤–µ–Ω 0
- –ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω –º–µ–Ω–µ–µ —á–∞—Å–∞ –Ω–∞–∑–∞–¥
- –ù–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—É—Å—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
php artisan create:empty-user --name="–¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
php artisan test:logout-button --user-id=29

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
php artisan test:logout-button
```

### –û—Ç–ª–∞–¥–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤ development —Ä–µ–∂–∏–º–µ –∏–ª–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ `?debug=1` –∫ URL –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å –æ—Ç–ª–∞–¥–∫–∏, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∞—è:

- –î–æ–ª–∂–Ω–∞ –ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞
- –ü—Ä–∏—á–∏–Ω—É –ø—Ä–∏–Ω—è—Ç–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
- –í—Å–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏
- –ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Frontend (JavaScript)

–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `resources/js/composables/auth.js`:

- `shouldShowLogoutButtonWithData(documentsCount, balance)` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- `debugLogoutButtonCriteria(documentsCount, balance)` - —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ª–∞–¥–∫–∏

### Backend (PHP)

–°–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ –∫–æ–º–∞–Ω–¥–µ `app/Console/Commands/TestLogoutButtonLogic.php` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- `PageHeader.vue` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–≥–∏–∫—É –¥–ª—è –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è –∫–Ω–æ–ø–∫–∏
- `LogoutButtonDebug.vue` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–ª–∞–¥–∫–∏ (—Ç–æ–ª—å–∫–æ –≤ development)

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ü–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é –Ω–∞ –º–æ–º–µ–Ω—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
- –ò–∑ 29 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–∏—Å—Ç–µ–º–µ
- 22 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–∏–¥—è—Ç –∫–Ω–æ–ø–∫—É –≤—ã—Ö–æ–¥–∞ (–∞–∫—Ç–∏–≤–Ω—ã–µ)
- 7 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ –≤–∏–¥—è—Ç –∫–Ω–æ–ø–∫—É (–ø—É—Å—Ç—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã)

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–£–ª—É—á—à–µ–Ω–Ω—ã–π UX**: –ü—É—Å—Ç—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –Ω–µ –≤–∏–¥—è—Ç –Ω–µ–Ω—É–∂–Ω—É—é –∫–Ω–æ–ø–∫—É –≤—ã—Ö–æ–¥–∞
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—Å—Ç—å**: –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
3. **–ì–∏–±–∫–æ—Å—Ç—å**: –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤—Å–µ–≥–¥–∞ –º–æ–≥—É—Ç –≤—ã–π—Ç–∏
5. **–û—Ç–ª–∞–¥–æ—á–Ω–æ—Å—Ç—å**: –ï—Å—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –≤–∞–∂–Ω–æ—Å—Ç–∏ (–¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –±–∞–ª–∞–Ω—Å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å)
- –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥—Ä—É–≥–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏
- –ü—Ä–∏ —Å–æ–º–Ω–µ–Ω–∏—è—Ö —Å–∏—Å—Ç–µ–º–∞ –≤—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫—É –≤—ã—Ö–æ–¥–∞ (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–µ–≤—ã—à–µ –≤—Å–µ–≥–æ)

## üîÆ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ "–Ω–æ–≤–∏–∑–Ω—ã" –∞–∫–∫–∞—É–Ω—Ç–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥
2. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–ª–∏–∫–∏)
3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–∫—Ä—ã—Ç–∏—é –∫–Ω–æ–ø–∫–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
4. A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–∫—Ä—ã—Ç–∏—è 